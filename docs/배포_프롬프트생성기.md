# 프롬프트 생성기만 따로 배포하기 (Render)

프롬프트 생성기 **페이지 + API**를 **Render**에서 하나의 서비스로 배포하는 방법입니다. (무료 플랜 가능)

---

## 1. Render 가입 및 서비스 생성

1. [render.com](https://render.com) 가입 후 로그인
2. **Dashboard** → **New** → **Web Service**
3. **Connect a repository** → GitHub에서 `p` 저장소 연결 (또는 푸시한 저장소 선택)
4. 아래처럼 설정

| 항목 | 값 |
|------|-----|
| **Name** | 예: `santokki-prompt-generator` |
| **Region** | 원하는 지역 (예: Frankfurt) |
| **Branch** | `main` (또는 사용 중인 브랜치) |
| **Root Directory** | 비움 (전체 저장소 루트) |
| **Runtime** | Node |
| **Build Command** | `npm install` |
| **Start Command** | `npm run start:api` |

---

## 2. 환경 변수 설정

**Environment** 탭에서 다음 변수 추가:

| Key | 값 (비공개로 입력) |
|-----|---------------------|
| `OPENAI_API_KEY` | OpenAI API 키 (필수) |
| `LINKTREE_URL` | 예: `https://linktr.ee/santokki` (선택) |
| `FIREBASE_SERVICE_ACCOUNT_JSON` | Firebase 서비스 계정 JSON **전체를 한 줄 문자열**로 붙여넣기 (10명 이상 시 자동 통계 사용할 때만 필요) |

**Firebase 키를 환경 변수로 넣는 방법**

- Firebase Console → 프로젝트 설정 → 서비스 계정 → 키 생성 → JSON 다운로드
- JSON 파일 내용 전체를 복사한 뒤, **한 줄로** 만들어서(줄바꿈 제거) Render 환경 변수 값에 붙여넣기  
  (또는 그대로 여러 줄 붙여넣어도 동작할 수 있음. 문제 있으면 한 줄로 시도)

---

## 3. 배포

- **Create Web Service** 클릭 후 자동 빌드·배포
- 끝나면 **https://서비스이름.onrender.com** 형태의 URL이 생김

---

## 4. 접속 주소

| 용도 | URL |
|------|-----|
| **프롬프트 생성기** | `https://서비스이름.onrender.com/prompt-generator.html` |
| 대시보드 (같은 서버) | `https://서비스이름.onrender.com/santokki/dashboard.html` |
| API 직접 호출 | `POST https://서비스이름.onrender.com/api/generate-prompts` |

같은 서비스에서 정적 파일 + API를 함께 제공하므로 **CORS·도메인 설정 추가 없이** 사용 가능합니다.

---

## 5. 참고

- **무료 플랜**: 일정 시간 미사용 시 슬립 → 첫 요청 시 30초~1분 정도 깨는 시간 있을 수 있음
- **Firebase 키**: Git에 올리지 말고, Render 환경 변수에만 넣기
- 쇼핑몰(Netlify)은 그대로 두고, **프롬프트 생성기만** 이 Render 주소로 쓰면 됨
